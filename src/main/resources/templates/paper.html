<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="Mosaddek">
  <meta name="keyword"
        content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
  <link rel="shortcut icon" href="img/favicon.html">

  <title>Blank</title>

  <!-- Bootstrap core CSS -->
  <link th:href="@{~/css/bootstrap.min.css}" rel="stylesheet">
  <link th:href="@{~/css/bootstrap-reset.css}" rel="stylesheet">
  <!--external css-->
  <link th:href="@{~/assets/font-awesome/css/font-awesome.css}" rel="stylesheet"/>
  <!-- Custom styles for this template -->
  <link th:href="@{~/css/style.css}" rel="stylesheet">
  <link th:href="@{~/css/style-responsive.css}" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
  <!--[if lt IE 9]>
  <script th:src="@{~/js/html5shiv.js}"></script>
  <script th:src="@{~/js/respond.min.js}"></script>
  <![endif]-->
</head>

<body>

<section id="container" class="">
  <!--header start-->
  <header class="header white-bg">
    <div class="sidebar-toggle-box">
      <div data-original-title="Toggle Navigation" data-placement="right" class="icon-reorder tooltips"></div>
    </div>
    <!--logo start-->
    <a href="#" class="logo">教师评教系统</span></a>
    <!--logo end-->

  </header>
  <!--header end-->
  <!--sidebar start-->
  <aside th:if="${session.userInfo.role} eq 0">
    <div id="sidebar" class="nav-collapse ">
      <!-- sidebar menu start-->
      <ul class="sidebar-menu">
        <li class="active">
          <a class="" th:href="@{~/home}">
            <i class="icon-user"></i>
            <span>个人中心</span>
          </a>
        </li>
        <li class="sub-menu">
          <a href="javascript:;" class="">
            <i class="icon-cogs"></i>
            <span>个人设置</span>
            <span class="arrow"></span>
          </a>
          <ul class="sub">
            <li><a class="" th:href="@{~/profile-edit}">编辑个人资料</a></li>
            <li><a class="" th:href="@{~/security-edit}">安全设置</a></li>
          </ul>
        </li>
        <li>
          <a class="" th:href="@{~/list_teacher}">
            <i class="icon-check"></i>
            <span>教师信息管理</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/list_major}">
            <i class="icon-check"></i>
            <span>专业信息管理</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/list_class}">
            <i class="icon-check"></i>
            <span>班级信息管理</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/list_student}">
            <i class="icon-check"></i>
            <span>学生信息管理</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/list_course}">
            <i class="icon-check"></i>
            <span>课程管理</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/list_xuanke}">
            <i class="icon-check"></i>
            <span>选课管理</span>
          </a>
        </li>
        <li class="sub-menu">
          <a class="" href="javascript:void(0)">
            <i class="icon-check"></i>
            <span>题库管理</span>
          </a>
          <ul class="sub">
            <li class=""><a class="" th:href="@{~/list_question}">问题管理</a></li>
            <li><a class="" th:href="@{~/list_paper}">问卷管理</a></li>
          </ul>
        </li>
        <li>
          <a class="" th:href="@{~/get_result}">
            <i class="icon-check"></i>
            <span>评教结果查看</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/result_charts}">
            <i class="icon-check"></i>
            <span>统计分析</span>
          </a>
        </li>
        <li>
          <a class="" th:href="@{~/login}">
            <i class="icon-signout"></i>
            <span>退出系统</span>
          </a>
        </li>
      </ul>
      <!-- sidebar menu end-->
    </div>
  </aside>
  <aside th:if="${session.userInfo.role} ne 0">
    <div id="sidebar" class="nav-collapse ">
      <!-- sidebar menu start-->
      <ul class="sidebar-menu">
        <li class="">
          <a class="" href="javascript:void(0)">
            <i class="icon-user"></i>
            <span>个人中心</span>
          </a>
        </li>
        <li class="sub-menu">
          <a href="javascript:;" class="">
            <i class="icon-cogs"></i>
            <span>个人设置</span>
            <span class="arrow"></span>
          </a>
          <ul class="sub">
            <li><a class="" href="profile-edit">编辑个人资料</a></li>
            <li><a class="" href="security-edit">安全设置</a></li>
          </ul>
        </li>
        <li  class="active" th:if="${session.userInfo.role} eq 2">
          <a class="" th:href="@{~/reading_papers}">
            <i class="icon-check"></i>
            <span>教师评教</span>
          </a>
        </li>
        <li th:if="${session.userInfo.role} eq 1">
          <a class="" th:href="@{~/get_result}">
            <i class="icon-check"></i>
            <span>评教结果查看</span>
          </a>
        </li>
        <li>
          <a class="" href="/login">
            <i class="icon-signout"></i>
            <span>退出系统</span>
          </a>
        </li>
      </ul>
      <!-- sidebar menu end-->
    </div>
  </aside>
  <!--sidebar end-->
  <!--main content start-->
  <section id="main-content">
    <section class="wrapper">
      <!-- page start-->
      <div class="row">
        <div class="col-lg-12">
          <section class="panel">
            <header class="panel-heading">
              问卷
            </header>
            <div class="panel-body">
              <form class="form-horizontal tasi-form">
                <div class="form-group" th:each="question:${questions}">
                  <label class="control-label col-lg-10 col-lg-offset-1"
                         th:text="${question.question}">题干题干</label>
                  <div class="col-lg-10 col-lg-offset-1">

                    <div class="radio">

                      <input type="radio" th:name="${question.oid}"
                             th:text="${question.answerA}" th:value="${question.scoreA}">
                    </div>
                    <div class="radio">

                      <input type="radio" th:name="${question.oid}"
                             th:text="${question.answerB}" th:value="${question.scoreB}">

                    </div>
                    <div class="radio">

                      <input type="radio" th:name="${question.oid}"
                             th:text="${question.answerC}" th:value="${question.scoreC}">


                    </div>
                    <div class="radio">

                      <input type="radio" th:name="${question.oid}"
                             th:text="${question.answerD}" th:value="${question.scoreD}">

                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-lg-10 col-lg-offset-1">对教师的印象及评价</label>
                  <div class="col-lg-10 col-lg-offset-1">
                    <textarea class="form-control" name="editor1" rows="6"
                              placeholder="在此填写对教师的主观印象" required></textarea>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-lg-offset-2 col-lg-10">
                    <a class="btn btn-info" th:data-result="${resultId}">保存</a>
                    <button class="btn btn-default" type="button">取消</button>
                  </div>
                </div>
              </form>
            </div>
          </section>
        </div>
      </div>
      <!-- page end-->
    </section>
  </section>
  <!--main content end-->
</section>

<!-- js placed at the end of the document so the pages load faster -->
<script th:src="@{~/js/jquery.js}"></script>
<script th:src="@{~/js/bootstrap.min.js}"></script>
<script th:src="@{~/js/jquery.scrollTo.min.js}"></script>
<script th:src="@{~/js/jquery.nicescroll.js}" type="text/javascript"></script>


<!--common script for all pages-->
<script th:src="@{~/js/common-scripts.js}"></script>
<script>
  $(document).ready(function () {
    $('a.btn-info').click(function () {
      var checkedvalue = 0;
      $('input:radio:checked').each(function () {
        checkedvalue += Number.parseInt($(this).val());
      });
      $.ajax({
        url: "/comment",
        type: "post",
        contentType: "application/json",
        dataType: "json",
        data: JSON.stringify({
          score: checkedvalue,
          comment: $('textarea').val(),
          resultId:$('a.btn-info').data('result')
        }),
        success: function (data) {
          if (data.success) {
            alert("评价成功");
            window.location.replace("http://localhost:8080/index");
          } else {
            alert("评价失败");
          }
        },
        error: function () {
          alert("ajax请求错误")
        }

      });
    });
  });
</script>
</body>
</html>
