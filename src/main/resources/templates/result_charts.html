<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Mosaddek">
    <meta name="keyword" content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <link rel="shortcut icon" href="img/favicon.html">

    <title>FlatLab - Flat & Responsive Bootstrap Admin Template</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-reset.css" rel="stylesheet">
    <!--external css-->
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
    <link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

  <section id="container" class="">
      <!--header start-->
      <header class="header white-bg">
            <div class="sidebar-toggle-box">
                <div data-original-title="Toggle Navigation" data-placement="right" class="icon-reorder tooltips"></div>
            </div>
            <!--logo start-->
            <a href="#" class="logo">教师评教系统</span></a>
            <!--logo end-->

        </header>
      <!--header end-->
      <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu">
          <li>
            <a class="" th:href="@{~/home}">
              <i class="icon-user"></i>
              <span>个人中心</span>
            </a>
          </li>
          <li class="sub-menu">
            <a href="javascript:;" class="">
              <i class="icon-cogs"></i>
              <span>个人设置</span>
              <span class="arrow"></span>
            </a>
            <ul class="sub">
              <li><a class="" th:href="@{~/profile-edit}">编辑个人资料</a></li>
              <li><a class="" th:href="@{~/security-edit}">安全设置</a></li>
            </ul>
          </li>
          <li>
            <a class="" th:href="@{~/list_teacher}">
              <i class="icon-check"></i>
              <span>教师信息管理</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/list_major}">
              <i class="icon-check"></i>
              <span>专业信息管理</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/list_class}">
              <i class="icon-check"></i>
              <span>班级信息管理</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/list_student}">
              <i class="icon-check"></i>
              <span>学生信息管理</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/list_course}">
              <i class="icon-check"></i>
              <span>课程管理</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/list_xuanke}">
              <i class="icon-check"></i>
              <span>选课管理</span>
            </a>
          </li>
          <li class="sub-menu">
            <a class="" href="javascript:void(0)">
              <i class="icon-check"></i>
              <span>题库管理</span>
            </a>
            <ul class="sub">
              <li class=""><a class="" th:href="@{~/list_question}">问题管理</a></li>
              <li><a class="" th:href="@{~/list_paper}">问卷管理</a></li>
            </ul>
          </li>
          <li>
            <a class="" th:href="@{~/get_result}">
              <i class="icon-check"></i>
              <span>评教结果查看</span>
            </a>
          </li>
          <li class="active">
            <a class="" th:href="@{~/result_charts}">
              <i class="icon-check"></i>
              <span>统计分析</span>
            </a>
          </li>
          <li>
            <a class="" th:href="@{~/login}">
              <i class="icon-signout"></i>
              <span>退出系统</span>
            </a>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
      <!--sidebar end-->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              <!--state overview start-->
              <div class="row">


              </div>

          </section>
      </section>
      <!--main content end-->
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.scrollTo.min.js"></script>
    <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
    <script src="js/jquery.sparkline.js" type="text/javascript"></script>
    <script src="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script>
    <script src="js/owl.carousel.js" ></script>
    <script src="js/jquery.customSelect.min.js" ></script>

    <!--common script for all pages-->
    <script src="js/common-scripts.js"></script>

    <!--script for this page-->
    <script src="js/echarts.common.min.js"></script>

  <script>

      //custom select box

      $(function(){
          $('select.styled').customSelect();
      });
      $.ajax({
          url:"charts",
          type:'get',
          dataType:'json',
          success:function (data) {
              $.each(data,function (key,val) {
                  $('#main-content .row').append('<div class="col-lg-4">\n' +
                      '                      <section class="panel">\n' +
                      '                          <header class="panel-heading">\n' +
                      val.title +
                      '<a href="uncommented/'+val.dataMap.id+'" class="pull-right">详情</a>'+
                      '                          </header>\n' +
                      '                          <div class="panel-body text-center">\n' +
                      '                              <div class="inline-block">\n' +
                      '                                  <div id="d'+key+'" style="width: 350px;height: 350px;"></div>\n' +
                      '                              </div>\n' +
                      '                          </div>\n' +
                      '                      </section>\n' +
                      '                  </div>');
                  var dom = document.getElementById('d'+key);
                  init_charts(dom,val.dataMap);
              })
          }
      })
    function init_charts(dom,data) {
      echarts.init(dom).setOption({
        tooltip : {
          trigger: 'item',
          formatter: "{b} : {c} ({d}%)"
        },
        legend:{
          bottom:5,
          right:10
        },
        color:['#41cac0','#ff766c'],
        series: {
          type: 'pie',
          radius: ['50%', '70%'],
          avoidLabelOverlap: false,
          label:{
            normal:{
              show:false,
              position:'center'
            },
            emphasis: {
              show: true,
              textStyle: {
                fontSize: '24',
                fontWeight: 'bold'
              }
            }
          },
          data: [
            {name: '已评教', value: data.commented},
            {name: '未评教', value: data.uncommented},

          ]
        },

      })
    }
  </script>

  </body>
</html>
